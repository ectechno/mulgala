﻿@using System.Security.Claims
@using System.Web
@{
    var authentication = Context.GetOwinContext().Authentication;
    var ticket = authentication.AuthenticateAsync("Application").Result;
    var identity = ticket != null ? ticket.Identity : null;
    var scopes = (Request.QueryString.Get("scope") ?? "").Split(' ');
}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Authorize</title>
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,200' rel='stylesheet' type='text/css'>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/authserver.css" rel="stylesheet" />
</head>
<body>
    <form method="POST">
        <div class="container">
            <div class="row login_box">
                <div class="col-md-12 col-xs-12" align="center">
                    <div class="outter"><img src="@ViewBag.UserLogoUrl" class="image-circle" /></div>
                    <h1>Hi @identity.Name</h1>
                    <span>Application want to do the following on your behalf</span>
                </div>



                <div class="col-md-12 col-xs-12 login_control">

                    <ul class="scopelist">
                        @foreach (var scope in scopes)
                        {
                            <li class="scope">@scope</li>
                        }
                    </ul>
                
                    <div align="center">
                        <input type="submit" class="btn btn-orange" name="submit.Grant" value="Grant" />
                        <input type="submit" class="btn btn-orange" name="submit.Login" value="Not @identity.Name ?" />
                    </div>

                </div>

            </div>
        </div>
    </form>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
</body>
</html>